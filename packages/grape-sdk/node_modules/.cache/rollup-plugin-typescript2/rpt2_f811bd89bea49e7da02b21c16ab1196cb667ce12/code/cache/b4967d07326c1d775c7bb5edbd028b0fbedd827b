{"code":"import { WNATIVE_ADDRESS, ZERO, getProviderOrSigner, toElastic } from '@champagneswap/core-sdk';\r\nimport { AddressZero } from '@ethersproject/constants';\r\nimport { Contract } from '@ethersproject/contracts';\r\nimport JSBI from 'jsbi';\r\nimport KASHIPAIR_ABI from '../constants/abis/kashipair.json';\r\nimport { KashiAction } from '../enums';\r\nimport { defaultAbiCoder } from '@ethersproject/abi';\r\nimport { toShare } from '@champagneswap/cellar-sdk';\r\nexport class KashiCooker {\r\n    constructor(pair, account, library, chainId) {\r\n        this.pair = pair;\r\n        this.account = account || AddressZero;\r\n        this.library = library;\r\n        this.chainId = chainId || 1;\r\n        this.actions = [];\r\n        this.values = [];\r\n        this.datas = [];\r\n    }\r\n    add(action, data, value = ZERO) {\r\n        this.actions.push(action);\r\n        this.datas.push(data);\r\n        this.values.push(value);\r\n    }\r\n    approve(permit) {\r\n        if (permit) {\r\n            this.add(KashiAction.BENTO_SETAPPROVAL, defaultAbiCoder.encode(['address', 'address', 'bool', 'uint8', 'bytes32', 'bytes32'], [permit.account, permit.masterContract, true, permit.v, permit.r, permit.s]));\r\n        }\r\n    }\r\n    updateExchangeRate(mustUpdate = false, minRate = ZERO, maxRate = ZERO) {\r\n        this.add(KashiAction.UPDATE_EXCHANGE_RATE, defaultAbiCoder.encode(['bool', 'uint256', 'uint256'], [mustUpdate, minRate, maxRate]));\r\n        return this;\r\n    }\r\n    bentoDepositCollateral(amount) {\r\n        const useNative = this.pair.collateral.address === WNATIVE_ADDRESS[this.chainId];\r\n        this.add(KashiAction.BENTO_DEPOSIT, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.collateral.address, this.account, amount, 0]), useNative ? amount : ZERO);\r\n        return this;\r\n    }\r\n    bentoWithdrawCollateral(amount, share) {\r\n        const useNative = this.pair.collateral.address === WNATIVE_ADDRESS[this.chainId];\r\n        this.add(KashiAction.BENTO_WITHDRAW, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.collateral.address, this.account, amount, share]), useNative ? amount : ZERO);\r\n        return this;\r\n    }\r\n    bentoTransferCollateral(share, toAddress) {\r\n        this.add(KashiAction.BENTO_TRANSFER, defaultAbiCoder.encode(['address', 'address', 'int256'], [this.pair.collateral.address, toAddress, share]));\r\n        return this;\r\n    }\r\n    repayShare(part) {\r\n        this.add(KashiAction.GET_REPAY_SHARE, defaultAbiCoder.encode(['int256'], [part]));\r\n        return this;\r\n    }\r\n    addCollateral(amount, fromBento) {\r\n        let share;\r\n        if (fromBento) {\r\n            share = JSBI.lessThan(amount, ZERO) ? amount : toShare(this.pair.collateral, amount);\r\n        }\r\n        else {\r\n            const useNative = this.pair.collateral.address === WNATIVE_ADDRESS[this.chainId];\r\n            this.add(KashiAction.BENTO_DEPOSIT, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.collateral.address, this.account, amount, 0]), useNative ? amount : ZERO);\r\n            share = JSBI.BigInt(-2);\r\n        }\r\n        this.add(KashiAction.ADD_COLLATERAL, defaultAbiCoder.encode(['int256', 'address', 'bool'], [share, this.account, false]));\r\n        return this;\r\n    }\r\n    addAsset(amount, fromBento) {\r\n        let share;\r\n        if (fromBento) {\r\n            share = toShare(this.pair.asset, amount);\r\n        }\r\n        else {\r\n            const useNative = this.pair.asset.address === WNATIVE_ADDRESS[this.chainId];\r\n            this.add(KashiAction.BENTO_DEPOSIT, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.asset.address, this.account, amount, 0]), useNative ? amount : ZERO);\r\n            share = JSBI.BigInt(-2);\r\n        }\r\n        this.add(KashiAction.ADD_ASSET, defaultAbiCoder.encode(['int256', 'address', 'bool'], [share, this.account, false]));\r\n        return this;\r\n    }\r\n    removeAsset(fraction, toBento) {\r\n        this.add(KashiAction.REMOVE_ASSET, defaultAbiCoder.encode(['int256', 'address'], [fraction, this.account]));\r\n        if (!toBento) {\r\n            const useNative = this.pair.asset.address === WNATIVE_ADDRESS[this.chainId];\r\n            this.add(KashiAction.BENTO_WITHDRAW, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.asset.address, this.account, 0, -1]));\r\n        }\r\n        return this;\r\n    }\r\n    removeCollateral(share, toBento) {\r\n        this.add(KashiAction.REMOVE_COLLATERAL, defaultAbiCoder.encode(['int256', 'address'], [share, this.account]));\r\n        if (!toBento) {\r\n            const useNative = this.pair.collateral.address === WNATIVE_ADDRESS[this.chainId];\r\n            this.add(KashiAction.BENTO_WITHDRAW, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.collateral.address, this.account, 0, share]));\r\n        }\r\n        return this;\r\n    }\r\n    removeCollateralFraction(fraction, toBento) {\r\n        this.add(KashiAction.REMOVE_COLLATERAL, defaultAbiCoder.encode(['int256', 'address'], [fraction, this.account]));\r\n        if (!toBento) {\r\n            const useNative = this.pair.collateral.address === WNATIVE_ADDRESS[this.chainId];\r\n            this.add(KashiAction.BENTO_WITHDRAW, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.collateral.address, this.account, 0, -1]));\r\n        }\r\n        return this;\r\n    }\r\n    borrow(amount, toBento, toAddress = '') {\r\n        this.add(KashiAction.BORROW, defaultAbiCoder.encode(['int256', 'address'], [amount, toAddress && toBento ? toAddress : this.account]));\r\n        if (!toBento) {\r\n            const useNative = this.pair.asset.address === WNATIVE_ADDRESS[this.chainId];\r\n            this.add(KashiAction.BENTO_WITHDRAW, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.asset.address, toAddress || this.account, amount, 0]));\r\n        }\r\n        return this;\r\n    }\r\n    repay(amount, fromBento) {\r\n        if (!fromBento) {\r\n            const useNative = this.pair.asset.address === WNATIVE_ADDRESS[this.chainId];\r\n            this.add(KashiAction.BENTO_DEPOSIT, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.asset.address, this.account, amount, 0]), useNative ? amount : ZERO);\r\n        }\r\n        this.add(KashiAction.GET_REPAY_PART, defaultAbiCoder.encode(['int256'], [fromBento ? amount : -1]));\r\n        this.add(KashiAction.REPAY, defaultAbiCoder.encode(['int256', 'address', 'bool'], [-1, this.account, false]));\r\n        return this;\r\n    }\r\n    repayPart(part, fromBento) {\r\n        if (!fromBento) {\r\n            const useNative = this.pair.asset.address === WNATIVE_ADDRESS[this.chainId];\r\n            this.add(KashiAction.GET_REPAY_SHARE, defaultAbiCoder.encode(['int256'], [part]));\r\n            this.add(KashiAction.BENTO_DEPOSIT, defaultAbiCoder.encode(['address', 'address', 'int256', 'int256'], [useNative ? AddressZero : this.pair.asset.address, this.account, 0, -1]), \r\n            // TODO: Put some warning in the UI or not allow repaying ETH directly from wallet, because this can't be pre-calculated\r\n            useNative\r\n                ? JSBI.divide(JSBI.multiply(toShare(this.pair.asset, toElastic(this.pair.totalBorrow, part, true)), JSBI.BigInt(1001)), JSBI.BigInt(1000))\r\n                : ZERO);\r\n        }\r\n        this.add(KashiAction.REPAY, defaultAbiCoder.encode(['int256', 'address', 'bool'], [part, this.account, false]));\r\n        return this;\r\n    }\r\n    action(address, value, data, useValue1, useValue2, returnValues) {\r\n        this.add(KashiAction.CALL, defaultAbiCoder.encode(['address', 'bytes', 'bool', 'bool', 'uint8'], [address, data, useValue1, useValue2, returnValues]), value);\r\n    }\r\n    async cook() {\r\n        if (!this.library) {\r\n            return {\r\n                success: false,\r\n            };\r\n        }\r\n        const kashiPairCloneContract = new Contract(this.pair.address, KASHIPAIR_ABI, getProviderOrSigner(this.library, this.account));\r\n        try {\r\n            return {\r\n                success: true,\r\n                tx: await kashiPairCloneContract.cook(this.actions, this.values, this.datas, {\r\n                    value: this.values.reduce((a, b) => JSBI.add(a, b), ZERO),\r\n                }),\r\n            };\r\n        }\r\n        catch (error) {\r\n            console.error('KashiCooker Error: ', error);\r\n            return {\r\n                success: false,\r\n                error: error,\r\n            };\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=KashiCooker.js.map","references":["/Users/jq/Dropbox/champagneswap-core-sdk/packages/core-sdk/dist/index.d.ts","/Users/jq/Dropbox/champagneswap-core-sdk/node_modules/@ethersproject/constants/lib/index.d.ts","/Users/jq/Dropbox/champagneswap-core-sdk/node_modules/@ethersproject/contracts/lib/index.d.ts","/Users/jq/Dropbox/champagneswap-core-sdk/node_modules/jsbi/jsbi.d.ts","/Users/jq/Dropbox/champagneswap-core-sdk/packages/grape-sdk/src/constants/abis/kashipair.json","/Users/jq/Dropbox/champagneswap-core-sdk/packages/grape-sdk/src/enums/index.ts","/Users/jq/Dropbox/champagneswap-core-sdk/packages/grape-sdk/src/interfaces/index.ts","/Users/jq/Dropbox/champagneswap-core-sdk/node_modules/@ethersproject/providers/lib/index.d.ts","/Users/jq/Dropbox/champagneswap-core-sdk/node_modules/@ethersproject/abi/lib/index.d.ts","/Users/jq/Dropbox/champagneswap-core-sdk/packages/cellar-sdk/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"KashiCooker.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/entities/KashiCooker.ts\"],\"names\":[],\"mappings\":\"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\"}"}
